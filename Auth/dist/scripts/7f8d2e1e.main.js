(function(){$(function(){var a,b,c,d,e,f,g,h,i,j,k;return b=$("#login-form").first(),c=b.find("a[data-type=submit]").first(),a=$(".alert-container"),b.keypress(function(a){return 13===a.which?b.submit():void 0}),b.submit(function(a){var d;return a.preventDefault,d=$(this).serialize(),h(),j(c,"Authenticating..."),c.addClass("btn-warning"),$.ajax({type:"POST",url:this.action,data:d,dataType:"text",success:function(a){var b;return j(c,"Success! Redirecting... "),c.addClass("btn-success"),b=JSON.parse(a),b.url?setTimeout(function(){return window.location.replace(b.url)},500):(k("danger","Something happened parsing response from the server. Refresh the page and try again."),g())},error:function(a){var d;return d=JSON.parse(a.responseText),j(c,"Try again"),c.addClass("btn-danger"),k("danger",d.message),g(),b.find("input").first().focus()}}),!1}),h=function(){return d(),i(""),$.each(b[0].elements,function(a,b){return $(b).prop("disabled",!0)})},g=function(){return e(),$.each(b[0].elements,function(a,b){return $(b).prop("disabled",!1)})},e=function(){return c.click(function(a){return a.preventDefault,b.submit(),!1})},d=function(){return c.off()},j=function(a,b){return a.text(b),a.removeClass("btn-warning"),a.removeClass("btn-primary"),a.removeClass("btn-danger"),a.removeClass("btn-success")},k=function(a,b){var c;return c="<div class='alert alert-"+a+" error-message text-center' role='alert'>"+b+"</div>",i(c)},i=function(b){return a.fadeOut("fast",function(){return $(this).html(b).show("fast")})},(f=function(){return e()})()})}).call(this);